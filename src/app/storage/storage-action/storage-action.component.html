<app-storage-search>
</app-storage-search>

<div class="storage-action-container">

    <div class="storage-action">

        <!-- {{ storageBlock.entities[blockId]?.header?.predecessor }} -->

        <table mat-table [dataSource]="tableDataSource">

            <ng-container matColumnDef="path">
                <th mat-header-cell *matHeaderCellDef>
                    <span>Path</span>

                    <button routerLink="/storage/{{ storageBlock.entities[blockId]?.header?.predecessor }}"
                        mat-icon-button *ngIf="storageBlock.entities[blockId]?.header?.predecessor">
                        <mat-icon>chevron_left</mat-icon>
                    </button>

                    <!-- <button routerLink="/storage/" mat-icon-button>
                        <mat-icon>chevron_right</mat-icon>
                    </button> -->

                    <span *ngIf="storageBlock.entities[blockId]?.header?.level">
                        {{ storageBlock.entities[blockId]?.header?.level }} </span>
                    <span *ngIf="storageBlock.entities[blockId]?.hash"> {{ storageBlock.entities[blockId]?.hash }}
                    </span>

                </th>
                <td mat-cell *matCellDef="let action">
                    <div>
                        <span *ngIf="action?.id?.Set">
                            <!--   <span> {{action.id.Set?.start_time }}</span>&nbsp; -->
                            <span> {{action.id.Set?.timeStorage }} μs |</span>&nbsp;
                            <span> {{action.id.Set?.timeProtocol }} μs |</span>&nbsp;

                            <span
                                [style.color]="action.id.Set?.color">{{action.id.Set?.category }}</span>{{action.id.Set?.key}}</span>
                        <span [style.color]="action.id.Set?.color"
                            *ngIf="action.id.Set?.lastKey">/{{ action.id.Set?.lastKey }} </span>
                        <span *ngIf="action?.id?.Delete">
                            <span> {{action.id.Delete?.time }} μs |</span>&nbsp;
                            del <i>{{action.id.Delete?.key}}</i>
                        </span>
                        <span *ngIf="action?.id?.RemoveRecord">
                            <span> {{action.id.RemoveRecord?.time }} μs |</span>&nbsp;
                            rem <i>{{action.id.RemoveRecord?.key}} </i>
                        </span>
                        <span *ngIf="action?.id?.Set" style="text-align: left">
                            <span *ngIf="action.id?.Set?.value"><b>{{action.id?.Set?.value}}</b></span>
                            <span *ngIf="!action.id?.Set?.value">{{action.id?.Set?.hex}} | {{action.id?.Set?.text}}</span>

                        </span>

                    </div>
                    <div *ngIf="false">
                        <span style="display:flex; justify-content: flex-end;"> 
                        
                        </span>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="value">
                <th mat-header-cell *matHeaderCellDef>Value</th>
                <td mat-cell *matCellDef="let action">

                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="['path']">
            </tr>
            <tr mat-row *matRowDef="let row; columns: ['path'];">
            </tr>

        </table>

        <mat-paginator [pageSizeOptions]="[100]"></mat-paginator>
    </div>

</div>


<!-- {{ storageAction.ids | json }} -->
<!-- <li *ngFor="let action of storageAction.entities">
    <span *ngIf="action?.Set">
        <b>set</b>: {{action.Set?.key}} - <b> {{action.Set?.value}} </b> | {{action.Set?.text}} | {{action.Set?.hex}}
    </span>
    <span *ngIf="action?.Delete">
        del:<i>{{action.Delete?.key}}</i>
    </span>
    <span *ngIf="action?.RemoveRecord">
        rem: <i>{{action.RemoveRecord?.key}} </i>
    </span>
</li> -->