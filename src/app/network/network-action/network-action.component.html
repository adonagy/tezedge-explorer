<div class="network-action-container">
    <div class="virtual-scroll-wrapper">
        <!-- <div class="virtual-scroll-filters">
            <div class="network-action-table-filter">
                <span style="padding: 0px 14px 0px 0px; width: 51px;">Control</span>
                <button mat-flat-button [class.active]="virtualScrollItems.filter.meta" (click)="filterType('meta')">
                    Meta
                </button>
                <button mat-flat-button [class.active]="virtualScrollItems.filter.connection"
                    (click)=" filterType('connection')">
                    Connection
                </button>
                <button mat-flat-button [class.active]="virtualScrollItems.filter.bootstrap" (click)=" filterType('bootstrap')">
                    Bootstrap
                </button>
                <button mat-flat-button [class.active]="virtualScrollItems.filter.advertise" (click)=" filterType('advertise')">
                    Advertise
                </button>
                <button mat-flat-button [class.active]="virtualScrollItems.filter.swap" (click)=" filterType('swap')">
                    Swap
                </button>
                <button mat-flat-button [class.active]="virtualScrollItems.filter.deactivate"
                    (click)=" filterType('deactivate')">
                    Deactivate
                </button>
    
                <span style="padding: 0px 8px 0px 8px; width: 40px;">Source</span>
                <button mat-flat-button [class.active]="virtualScrollItems.filter.local" (click)=" filterType('local')">
                    <span style="display:inline-block; margin: 1px 0px 0px -5px;">
                        <svg-icon icon="local" scale="0.8"></svg-icon>
                    </span>
                    Local
                </button>
                <button mat-flat-button [class.active]="virtualScrollItems.filter.remote" (click)=" filterType('remote')">
                    <span style="display:inline-block; margin: 1px 0px 0px -5px;">
                        <svg-icon icon="remote" scale="0.8"></svg-icon>
                    </span>
                    Remote
                </button>
    
                <span *ngIf="virtualScrollItems.urlParams" style="padding:0px 8px 0px 8px; width: 50px;">Address</span>
                <button *ngIf="virtualScrollItems.urlParams" mat-flat-button class="active" (click)="filterAddress()">
                    {{ virtualScrollItems.urlParams }}
                </button>
            </div>
    
            <div class="network-action-table-filter" style="padding-bottom:10px;">
    
                <span style="padding:0px 6px 0px 0px; width: 60px;">Messages</span>
    
                <button mat-flat-button [class.active]="virtualScrollItems.filter.currentHead"
                    (click)=" filterType('currentHead')">
                    Current Head
                </button>
                <button mat-flat-button [class.active]="virtualScrollItems.filter.currentBranch"
                    (click)=" filterType('currentBranch')">
                    Current Branch
                </button>
                <button mat-flat-button [class.active]="virtualScrollItems.filter.operation" (click)=" filterType('operation')">
                    Operation
                </button>
                <button mat-flat-button [class.active]="virtualScrollItems.filter.protocol" (click)=" filterType('protocol')">
                    Protocol
                </button>
                <button mat-flat-button [class.active]="virtualScrollItems.filter.blockHeaders"
                    (click)=" filterType('blockHeaders')">
                    Block Headers
                </button>
                <button mat-flat-button [class.active]="virtualScrollItems.filter.blockOperations"
                    (click)=" filterType('blockOperations')">
                    Block Operations
                </button>
                <button mat-flat-button [class.active]="virtualScrollItems.filter.blockOperationsHashes"
                    (click)=" filterType('blockOperationsHashes')">
                    Block Operations Hashes
                </button>
            </div>
        </div> -->
        
        <div class="virtual-scroll-header">
            <span style="display: inline-block; min-width: 180px;">
                DATETIME
            </span>
            <span style="display: inline-block; min-width: 180px;">
                ADDRESS
            </span>
            <span style="display: inline-block; min-width: 100px;">
                SOURCE
            </span>
            <span style="display: inline-block; min-width: 180px;">
                TYPE
            </span>
        </div>

        <div style="display:flex;flex-direction: row;">

            <div class="virtual-scroll-container">
                <ng-template vsFor let-event [vsForOf]="virtualScrollItems" let-position="position"
                    (getItems)="getItems($event)" (scrollChanged)="onScroll()">
                    <span class="item" [style.top.px]="position" [class.virtualScrollRowEven]="event.index % 2"
                        (click)="clickedItem(event)" (mouseenter)="tableMouseEnter(event)" (mouseleave)="tableMouseLeave()" 
                        [class.selected]="event?.id === networkClickedItem?.id" [class.hovered]="event?.id && event?.id === networkActionItem?.id && networkActionItem?.id !== networkClickedItem?.id">

                        <!-- For debug only TODO: remove later -->
                        <!-- <span style="display: inline-block; min-width: 180px;">
                            {{ event.index }}
                        </span>
                        <span *ngIf="!event?.datetime" style="display: inline-block; min-width: 180px;">
                            Loading...
                        </span> -->
                        <!-- <span style="display: inline-block; min-width: 180px;">
                            {{ event.id }}
                        </span> -->
                        
                        <span style="display: inline-block; min-width: 180px; color: #ffffffcc">
                            {{ event?.datetime }}
                        </span>
                        <span style="display: inline-block; min-width: 180px; color: #ffffffcc">
                            <!-- TODO: do we need the link to network on network?? -->
                            <!-- <a style="color: #ffffffcc; text-decoration:none;" href="#/network/{{ event?.remote_addr }}">
                                {{ event?.remote_addr }}</a> -->
                            {{ event?.remote_addr }}
                        </span>
                        <span style="display: inline-block; min-width: 100px; color: #ffffffcc">
                            <span *ngIf="event?.source_type==='local'">
                                <svg-icon icon="local"></svg-icon>
                                <svg-icon *ngIf="!event?.incoming" icon="arrow-right"></svg-icon>
                                <svg-icon *ngIf="event?.incoming" icon="arrow-left"></svg-icon>
                                <svg-icon icon="remote"></svg-icon>
                            </span>
                            <span *ngIf="event?.source_type==='remote'">
                                <svg-icon icon="remote"></svg-icon>
                                <svg-icon *ngIf="event?.incoming" icon="arrow-right"></svg-icon>
                                <svg-icon *ngIf="!event?.incoming" icon="arrow-left"></svg-icon>
                                <svg-icon icon="local"></svg-icon>
                            </span>
                        </span>
                        <span style="display: inline-block; min-width: 180px; color: #ffffffcc">
                            {{ event?.category }}<span *ngIf="event?.kind"> | {{ event?.kind }}</span>
                        </span>
                    </span>
                </ng-template>
            </div>

            <div class="virtual-scroll-container-detail">
                <div *ngIf="networkActionItem?.payload">
                    <ngx-json-viewer [json]="networkActionItem?.payload" [expanded]="false">
                    </ngx-json-viewer>
                </div>
            </div>
        </div>

        <div class="virtual-scroll-footer">
            <div class="virtual-scroll-footer-container">
                <div style="padding: 4px;">
                    <button class="action-button small" (click)="scrollToEnd()" mat-button> 
                        <img class="icon" src="../../../assets/icon/arrow-to-bottom.svg" />
                    </button>
    
                    <button (click)="toggleStream(true)" [class.active]="virtualScrollItems?.stream" class="action-button live" mat-button> 
                        <img class="icon" src="../../../assets/icon/play-circle.svg" />
                        LIVE 
                    </button>
    
                    <button (click)="toggleStream(false)" [class.active]="!virtualScrollItems?.stream" class="action-button paused" mat-button> 
                        <img class="icon" src="../../../assets/icon/pause-circle.svg" />
                        PAUSED 
                    </button>

                    <!-- Pagination -->
                    <span style="margin-left: 16px;">
                        <button class="action-button small" mat-button> 
                            <img class="icon" src="../../../assets/icon/angle-left.svg" />
                        </button>
                        <button class="action-button small" mat-button> 
                            <img class="icon" src="../../../assets/icon/angle-right.svg" />
                        </button>

                        <span style="margin-right: 8px;">
                            16.04.2019 - 02.02.2020
                        </span>

                        <button class="action-button small" mat-button> 
                            <img class="icon" src="../../../assets/icon/search.svg" />
                        </button>
                    </span>
                </div>
            </div>
        </div>

    </div>

</div>