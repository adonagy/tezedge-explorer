<style>
    .table-virtual-scroll-filter {
        padding: 10px 10px 0px 20px;
        display: flex;
        align-items: center;
        /*justify-content: center;*/
    }

    .table-virtual-scroll-filter button {
        min-width: 100px;
        margin-right: 4px;
        font-family: Roboto, "Helvetica Neue", sans-serif;
        font-size: 12px;
        line-height: 20px !important;
        font-weight: 400 !important;

        color: #dde0e6;
        background-color: #2f3848 !important;
        border: 1px solid #434b5b !important;
        border-radius: 8px;
        min-width: 0px;
        padding: 0px 8px 0px 8px !important;
    }

    .table-virtual-scroll-filter button.active {
        background-color: #434b5b !important;
    }

    .network-action-filter button.active mat-icon {
        display: inline-block;
        font-size: 18px;
        margin-left: -8px;
        height: 20px;
        width: 20px;
    }

    .cdk-virtual-scroll-content-wrapper > div > span > svg-icon > img {
        margin:0px !important
    }

</style>

<div class="network-action-container">

    <div class="table-virtual-scroll">

        <div class="table-virtual-scroll-filter">
            <!--
            <span style="font-size:12px;padding-right:8px;font-weight: 500; color:#cacaca !important">Filters:</span> 
            -->
            <!--
                {{ networkAction.filter.local }}
            -->

            <!--
                <span style="font-size:12px;padding: 0px 8px 0px 0px;font-weight: 500; width: 60px;color:#cacaca !important">Source</span>
                <button mat-flat-button [class.active]="networkAction.filter.local" (click)=" filterType('local')">
                    Local
                </button>
                <button mat-flat-button [class.active]="networkAction.filter.remote" (click)=" filterType('remote')">
                    Remote
                </button>
            -->

            <span
                style="font-size:12px;padding: 0px 16px 0px 0px;font-weight: 500; width: 50px;color:#cacaca !important">Control</span>
            <button mat-flat-button [class.active]="networkAction.filter.meta" (click)=" filterType('meta')">
                Meta
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.connection" (click)=" filterType('connection')">
                Connection
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.bootstrap" (click)=" filterType('bootstrap')">
                Bootstrap
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.advertise" (click)=" filterType('advertise')">
                Advertise
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.swap" (click)=" filterType('swap')">
                Swap
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.deactivate" (click)=" filterType('deactivate')">
                Deactivate
            </button>

            <span *ngIf="networkAction.urlParams" style="font-size:12px;padding:0px 16px 0px 16px;font-weight: 500; width: 50px;color:#cacaca !important">Address</span>
            <button *ngIf="networkAction.urlParams" mat-flat-button class="active" (click)="filterAddress()">
                {{ networkAction.urlParams }}
            </button>


        </div>

        <div class="table-virtual-scroll-filter"
            style="border-bottom: 0px solid #434b5b !important;padding-bottom:10px;">

            <span
                style="font-size:12px;padding:0px 8px 0px 0px;font-weight: 500; width: 60px;color:#cacaca !important">Messages</span>

            <button mat-flat-button [class.active]="networkAction.filter.currentHead" (click)=" filterType('currentHead')">
                Current Head
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.currentBranch"
                (click)=" filterType('currentBranch')">
                Current Branch
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.operation" (click)=" filterType('operation')">
                Operation
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.protocol" (click)=" filterType('protocol')">
                Protocol
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.blockHeaders" (click)=" filterType('blockHeaders')">
                Block Headers
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.blockOperations"
                (click)=" filterType('blockOperations')">
                Block Operations
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.blockOperationsHashes"
                (click)=" filterType('blockOperationsHashes')">
                Block Operations Hashes
            </button>

        </div>

        <div class="table-virtual-scroll-header">
            <span style="display:inline-block;min-width: 170px;">Datetime</span>
            <span style="display:inline-block;min-width: 150px;">Address</span>
            <span style="display:inline-block;min-width:  70px;">Source</span>
            <span style="display:inline-block;min-width: 220px;">Type</span>
            <span style="display:inline-block;min-width: 325px;">Message</span>
        </div>
        <cdk-virtual-scroll-viewport [itemSize]="36" [maxBufferPx]="288" [minBufferPx]="288"
            class="table-virtual-scroll-viewport" (scrolledIndexChange)="onScroll($event)">
            <div *cdkVirtualFor="let item of networkActionList" class="table-virtual-scroll-item">
                <span style="display:inline-block;min-width: 170px">{{item?.datetime}}</span>
                <span style="display:inline-block;min-width: 150px">
                    <a style="color: #dde0e6; text-decoration: none;" href="#/network/{{ item?.remote_addr }}">
                        {{ item?.remote_addr }}
                    </a>
                </span>
                <span style="display:inline-block;min-width:  70px">
                    <span *ngIf="item?.remote_requested===true">
                        <svg-icon icon="local"></svg-icon>
                        <svg-icon icon="arrow-left"></svg-icon>
                        <svg-icon icon="remote"></svg-icon>
                    </span>
                    <span *ngIf="item?.remote_requested===false">
                        <svg-icon icon="remote"></svg-icon>
                        <svg-icon icon="arrow-left"></svg-icon>
                        <svg-icon icon="local"></svg-icon>
                    </span>
                </span>
                <span style="display:inline-block;min-width: 220px">{{item?.category}} <span *ngIf="item?.kind"> |
                        {{ item?.kind }} </span> </span>
                <span style="display:inline-block;min-width: 325px;  white-space: nowrap;
           text-overflow: ellipsis;">{{item?.preview}}</span>
                <!-- <span style="display:inline-block;width: 200px">{{item.message}}</span>   -->
            </div>
        </cdk-virtual-scroll-viewport>
        <div class="table-virtual-scroll-footer">
            <span>
                <button mat-icon-button matTooltip="Start" (click)="scrollStart()" *ngIf="!networkAction?.stream">
                    <mat-icon style="color: #737373">play_arrow_outline</mat-icon>
                </button>
                <button mat-icon-button matTooltip="Stop" (click)="scrollStop()" *ngIf="networkAction?.stream">
                    <mat-icon style="color:#737373">stop_outline</mat-icon>
                </button>
                <button mat-icon-button style="transform: rotate(90deg)" matTooltip="Last page" (click)="scrollToEnd()">
                    <mat-icon style="color: #737373">last_page</mat-icon>
                </button>
            </span>
        </div>
    </div>

</div>