<div class="network-action-container">

    <div class="network-action">

        <table mat-table [dataSource]="tableDataSource" multiTemplateDataRows>

            <!--  <ng-container matColumnDef="datetime">
                <th mat-header-cell *matHeaderCellDef>Datetime</th>
                <td mat-cell *matCellDef="let element">
                    {{ element.datetime }}
                </td>
            </ng-container>  -->

            <ng-container matColumnDef="source">
                <th mat-header-cell *matHeaderCellDef>Source</th>
                <td mat-cell *matCellDef="let element">
                    <a style="color:black;text-decoration: none;" href="#/network/{{ element.source }}">
                        {{ element.source }}
                    </a>
                </td>
            </ng-container>

            <ng-container matColumnDef="destination">
                <th mat-header-cell *matHeaderCellDef>Destination</th>
                <td mat-cell *matCellDef="let element">
                    <a style="color:black;text-decoration: none;" href="#/network/{{ element.destination }}">
                        {{ element.destination }}
                    </a>
                </td>
            </ng-container>


            <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef>Type</th>
                <td mat-cell *matCellDef="let element">
                    {{ element.type }}
                </td>
            </ng-container>

            <ng-container matColumnDef="message">
                <th mat-header-cell *matHeaderCellDef>Message</th>
                <td mat-cell *matCellDef="let element">
                    <span *ngIf="element" style="text-align: left; cursor: pointer;"
                            (click)="expandedElement = element">
                        {{ element.message }}
                    </span>
                </td>
            </ng-container>

            <ng-container matColumnDef="expandedDetail">
                <td mat-cell *matCellDef="let action" [attr.colspan]="4" class="expanded-detail-cell">
                    <div *ngIf="expandedElement == action">
                        <ngx-json-viewer  [json]="action.message"></ngx-json-viewer>
                    </div>    
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="['source','destination','type','message']"></tr>
            <tr mat-row *matRowDef="let row; columns: ['source','destination','type','message'];"></tr>

            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']"
                [class.detail-expanded]="expandedElement == row" [class.detail-colapsed]="expandedElement != row">
            </tr>

        </table>

        <mat-paginator [pageSizeOptions]="[15]"></mat-paginator>

    </div>

</div>