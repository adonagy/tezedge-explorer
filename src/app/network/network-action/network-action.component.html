<style>
    .table-virtual-scroll-filter {
        width: 800px;
        margin: 10px 0px 0px 0px;
        padding: 0px 10px 0px 20px;
        height: 32px;
        display: flex;
        align-items: center;
        /*justify-content: center;*/
    }

    .table-virtual-scroll-filter button {
        min-width: 100px;
        margin-right: 4px;
        font-family: Roboto, "Helvetica Neue", sans-serif;
        font-size: 12px;
        line-height: 20px !important;
        font-weight: 400 !important;

        color: #dde0e6;
        background-color: #2f3848 !important;
        border: 1px solid #434b5b !important;
        border-radius: 8px;
        min-width: 0px;
        padding: 0px 12px 0px 8px !important;
    }

    .network-action-filter button mat-icon {
        display: none;
    }

    .network-action-filter button.active {
        background-color: #e0e0e0;
    }

    .network-action-filter button.active mat-icon {
        display: inline-block;
        font-size: 18px;
        margin-left: -8px;
        height: 20px;
        width: 20px;
    }
    
</style>

<!-- 
<div class="network-action-container">

    <div class="network-action-filter">
       <button mat-flat-button [class.active]="networkAction.filter.local" (click)="filter('local')">
            <mat-icon>check</mat-icon>
            Local
        </button>
        <button mat-flat-button [class.active]="networkAction.filter.remote" (click)="filter('remote')">
            <mat-icon>check</mat-icon>
            Remote
        </button>       
        &nbsp;&nbsp;&nbsp;
        <button mat-flat-button [class.active]="networkAction.filter.metadata" (click)="filter('metadata')">
            <mat-icon>check</mat-icon>
            Meta
        </button>    
        <button mat-flat-button [class.active]="networkAction.filter.connection" (click)="filter('connection')">
            <mat-icon>check</mat-icon>
            Connection
        </button>
    </div> -->

<!--
    <div class="network-action-filter"  style="padding-bottom: 10px;">   

        <button mat-flat-button [class.active]="networkAction.filter.current_head" (click)="filter('current_head')">
            <mat-icon>check</mat-icon>
            Current Head
        </button>    
        <button mat-flat-button [class.active]="networkAction.filter.current_branch" (click)="filter('current_branch')">
            <mat-icon>check</mat-icon>
            Current Branch
        </button>   
        &nbsp;&nbsp;&nbsp;
        <button mat-flat-button [class.active]="networkAction.filter.block_headers" (click)="filter('block_headers')">
            <mat-icon>check</mat-icon>
            Block Headers
        </button>    
        <button mat-flat-button [class.active]="networkAction.filter.block_operations" (click)="filter('block_operations')">
            <mat-icon>check</mat-icon>
            Block Operations
        </button>  
        &nbsp;&nbsp;&nbsp; 
        <button mat-flat-button [class.active]="networkAction.filter.bootstrap" (click)="filter('bootstrap')">
            <mat-icon>check</mat-icon>
            Bootstrap
        </button>    
    </div> -->
<!-- 
    <div class="network-action">
        
        <table mat-table [dataSource]="tableDataSource" multiTemplateDataRows>

            <ng-container matColumnDef="datetime">
                <th mat-header-cell *matHeaderCellDef>Datetime</th>
                <td mat-cell *matCellDef="let element">
                    {{ element.datetime }}
                </td>
            </ng-container>

            <ng-container matColumnDef="address">
                <th mat-header-cell *matHeaderCellDef>Address</th>
                <td mat-cell *matCellDef="let element">
                    <a style="text-decoration: none;" href="#/network/{{ element.remote_addr }}">
                        {{ element.remote_addr }} 
                    </a>
                </td>
            </ng-container>

            <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef>Type</th>
                <td mat-cell *matCellDef="let element">
                    <span *ngIf="element" style="text-align: left; cursor: pointer;"
                    (click)="expandedElement = element">
                        <span *ngIf="!element.incoming">
                            <svg-icon icon="upload"></svg-icon>
                        </span>    
                        <span *ngIf="element.incoming">
                            <svg-icon icon="download"></svg-icon>
                        </span>
                        {{ element.category }} <span *ngIf="element.kind"> | {{ element.kind }} </span>
                    </span>
                </td>
            </ng-container>

            <ng-container matColumnDef="message">
                <th mat-header-cell *matHeaderCellDef>Message</th>
                <td mat-cell *matCellDef="let element">
                    <span *ngIf="element" style="text-align: left; cursor: pointer;"
                            (click)="expandedElement = element">
                        {{ element.preview}}
                    </span>
                </td>
            </ng-container>

            <ng-container matColumnDef="expandedDetail">
                <td mat-cell *matCellDef="let action" [attr.colspan]="4" class="expanded-detail-cell">
                    <div *ngIf="expandedElement == action" style="min-width: 700px;">
                        <mat-tab-group>
                            <mat-tab label="PREVIEW"> 
                                <div style="padding: 15px 20px 0px 20px">
                                    <ngx-json-viewer  [json]="action.payload" [expanded]="false">
                                    </ngx-json-viewer>
                                </div>
                            </mat-tab>
                          </mat-tab-group>
                        </div>    
                    </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="['datetime','address','type','message']"></tr>
            <tr mat-row *matRowDef="let row; columns: ['datetime','address','type','message'];"></tr>

            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']"
                [class.detail-expanded]="expandedElement == row" [class.detail-colapsed]="expandedElement != row">
            </tr>

        </table>

        <mat-paginator [pageSizeOptions]="[15]"></mat-paginator>

    </div>

</div> -->

<div class="network-action-container">

    <div class="network-action-filter"  style="padding-top: 10px;">


    </div>

    <!-- <div style="padding: 20px;">
        <mat-chip-list aria-label="Fish selection">
            <mat-chip>One fish</mat-chip>
            <mat-chip>Two fish</mat-chip>
            <mat-chip color="primary" selected>Primary fish</mat-chip>
            <mat-chip color="accent" selected>Accent fish</mat-chip>
        </mat-chip-list>
    </div> -->


    <div class="table-virtual-scroll">
        
        <div class="table-virtual-scroll-filter">
            <span style="font-size:12px;padding-right:8px;font-weight: 500; width: 100px;color:#cacaca !important">Available filters:</span> 
            <button mat-flat-button [class.active]="networkAction.filter.local" (click)="filter('local')">
                <!-- <mat-icon>check</mat-icon> -->
                Local
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.remote" (click)="filter('remote')">
                Remote
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.metadata" (click)="filter('metadata')">
                Meta
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.connection" (click)="filter('connection')">
                Connection
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.current_head" (click)="filter('current_head')">
                Current Head
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.current_branch" (click)="filter('current_branch')">
                Current Branch
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.block_headers" (click)="filter('block_headers')">
                Block Headers
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.block_operatons"
                (click)="filter('block_operatons')">
                Block Operations
            </button>
            <button mat-flat-button [class.active]="networkAction.filter.bootstrap" (click)="filter('bootstrap')">
                Bootstrap
            </button>

        </div>

        <div class="table-virtual-scroll-header">
            <span style="display:inline-block;min-width: 170px;">Datetime</span>
            <span style="display:inline-block;min-width: 160px;">Address</span>
            <span style="display:inline-block;min-width: 240px;">Type</span>
            <span style="display:inline-block;min-width: 325px;">Message</span>
        </div>
        <cdk-virtual-scroll-viewport [itemSize]="36" [maxBufferPx]="288" [minBufferPx]="288"
            class="table-virtual-scroll-viewport" (scrolledIndexChange)="onScroll($event)">
            <div *cdkVirtualFor="let item of networkActionList" class="table-virtual-scroll-item">
                <span style="display:inline-block;min-width: 170px">{{item?.datetime}}</span>
                <span style="display:inline-block;min-width: 160px">{{item?.remote_addr}}</span>
                <span style="display:inline-block;min-width: 240px">{{item?.category}} <span *ngIf="item?.kind"> |
                        {{ item?.kind }} </span> </span>
                <span style="display:inline-block;min-width: 325px;  white-space: nowrap;
           text-overflow: ellipsis;">{{item?.preview}}</span>
                <!-- <span style="display:inline-block;width: 200px">{{item.message}}</span>   -->
            </div>
        </cdk-virtual-scroll-viewport>
        <div class="table-virtual-scroll-footer">
            <span>
                <button mat-icon-button matTooltip="Start" (click)="start()" *ngIf="!networkAction?.stream">
                    <mat-icon style="color: #737373">play_arrow_outline</mat-icon>
                </button>
                <button mat-icon-button matTooltip="Stop" (click)="stop()" *ngIf="networkAction?.stream">
                    <mat-icon style="color:#737373">stop_outline</mat-icon>
                </button>
                <button mat-icon-button style="transform: rotate(90deg)" matTooltip="Last page" (click)="scrollToEnd()">
                    <mat-icon style="color: #737373">last_page</mat-icon>
                </button>
            </span>
        </div>
    </div>